# Домашнее задание к занятию «3.2 Организация навигации (перемещение между Activity)»

В качестве результата пришлите ссылку на ваш Pull Request в личном кабинете студента на сайте [netology.ru](https://netology.ru).

**Важно**: ознакомьтесь со ссылками, представленными на главной странице [репозитория с домашними заданиями](../README.md).

**Важно**: если у вас что-то не получилось, то оформляйте Issue [по установленным правилам](../report-requirements.md).

## Как сдавать задачи

1. Откройте ваш проект с предыдущего ДЗ
1. Сделайте необходимые коммиты
1. Сделайте пуш (удостоверьтесь, что ваш код появился на GitHub)
1. Ссылку на ваш проект отправьте в личном кабинете на сайте [netology.ru](https://netology.ru)
1. Задачи, отмеченные, как необязательные, можно не сдавать, это не повлияет на получение зачета (в этом ДЗ все задачи являются обязательными)

## О документации

В мире Android всё меняется достаточно быстро. Поэтому зачастую, у нас с вами есть три актуальных источника информации:
1. [Выступления разработчиков](https://www.youtube.com/user/androiddevelopers) (если они были выпущены недавно)
1. Документация
1. Исходный код

Поэтому мы будем с вами учиться использовать все эти источники. Сегодня потренируемся в работе с документацией.

Напоминаем, что вы всегда можете прояснить непонятные моменты в чате учебной группы.

## Задача Editing

### Задача

На лекции мы реализовали создание поста в отдельной `Activity`. Вам нужно добавить функцию редактирования (тоже не в `MainActivity`). Вы можете сделать это по-разному:
1. Сделать отдельное `Activity` для редактирования
1. Совместить создание и редактирование в одной `Activity` (но тогда вам нужно будет как-то отличать создание от редактирования)

Опубликуйте изменения в вашем проекте на GitHub. Удостоверьтесь, что apk собирается с помощью GitHub Actions и при установке в эмуляторе приложение работает корректно.

В качестве результата пришлите ссылку на ваш GitHub-проект в личном кабинете студента на сайте [netology.ru](https://netology.ru).

## Задача YouTube Video

### Задача

На Intent'ах в Android строится большая часть взаимодействия между приложениями, в частности, мы можем задействовать другие приложения для отображения нужного нам контента/выполнения действий и т.д.

Вы можете посмотреть на самые распространённые Intent'ы [по ссылке](https://developer.android.com/guide/components/intents-common).

Идея: мы хотим сделать в классе `Post` необязательное поле `video`, в которое пользователь может вставить ссылку на YouTube видео.

Пока мы сами не умеем проигрывать видео, но, как вы наверное догадались, мы можем подключить другие приложения для его проигрывания.

Проанализируйте, как другие приложения отображают интерфейс постов с видео и как оно проигрывается.

Чаще всего это выглядит примерно так:

![](pic/video.png)

То есть, вам нужно добавить в разметку поста отдельный блок, который будет показываться при наличии ссылки на видео. А при нажатии на этот блок запускать неявный Intent со ссылкой, чтобы система его обработала и отобразила пользователю видео в браузере или в приложении YouTube (при наличии).

<details>
<summary>Советы по реализации</summary>

1. Не заморачивайтесь с обложкой видео, поставьте вместо неё произвольную картинку-заглушку и кнопку Play.
1. Перехватывайте все клики на кнопке и на обложке (т.е. пользователь не обязательно должен попадать в саму кнопку).
1. Для открытия внешнего приложения, вам достаточно:
    * URL'а вида: `"https://www.youtube.com/watch?v=WhWc3b3KhnY"` или сокращённой версии;
    * передать этот URL в `Uri.parse`: `Intent(Intent.ACTION_VIEW, Uri.parse('url'))`;
    * стартовать Activity с созданным Intent'ом.
</details>

Если вас заинтересовала тема работы с внешними Intent в Android, то вам могут быть полезны методы [Intent.resolveActivity](https://developer.android.com/reference/android/content/Intent#resolveActivity(android.content.pm.PackageManager)) и [PackageManager.queryIntentActivities](https://developer.android.com/reference/android/content/pm/PackageManager#queryIntentActivities(android.content.Intent,%20int)).
Они позволяют получить данные о том, какая активити будет запущена после отправки неявного Intent'а в метод `startActivity`. Например, подобным образом можно получить список приложений, которые могут обрабатывать Intent'ы, отправляемые из вашего приложения.
   
Для работы этих методов на Android 11 и выше необходимо в `AndroidManifest.xml` указать системе, что вы будете делать подобные запросы, а также перечислить их параметры.
Например, для просмотра активити, которые обрабатывают `Intent.ACTION_VIEW` нужно прописать:

```
<manifest>
    <queries>
        <intent>
            <action android:name="android.intent.action.VIEW" />
            <data android:scheme="*" />
        </intent>
    </queries>
</manifest>
```
   
В таком случае с помощью методов выше можно увидеть, какое приложение (и какая активити в нем!) обработает ваш Intent. Для Intent просмотра видео на эмуляторе получается следующий результат:

```
   queryIntentActivities: [ResolveInfo{ebaf4b0 com.google.android.youtube/.UrlActivity o=1 m=0x508000}]
   resolveActivity: ComponentInfo{com.google.android.youtube/com.google.android.youtube.UrlActivity}
```

Опубликуйте изменения в вашем проекте на GitHub. Удостоверьтесь, что apk собирается с помощью GitHub Actions и при установке в эмуляторе приложение работает корректно.

В качестве результата пришлите ссылку на ваш GitHub-проект в личном кабинете студента на сайте [netology.ru](https://netology.ru).
